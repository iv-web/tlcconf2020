<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Hexo 2.7 Released | 腾讯Live开发者大会</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="TLC2020,大前端,Serverless,信息流,技术大会,前端,技术人,程序员,专家,IT,前端智能化,开发者大会,腾讯看点">
  <meta name="description" content="腾讯TLC大会是由看点团队精心打造，致力于提升和促进全行业音视频、直播、图像处理、大前端、信息流等领域的交流和技术创新">
  <!-- Canonical links -->
  <link rel="canonical" href="https://2020.tlc.ivweb.io/news/2014/06/14/hexo-2-7-released/index.html">
  <!-- Alternative links -->
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <meta name="generator" content="Hexo 3.9.0">
  
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  <link rel="stylesheet" href="/css/navy.css">
  <!-- endbuild -->
  <link rel="stylesheet" href="https://pub.idqqimg.com/b4ac297d51d24fcebc633c0f8f7cadb5.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="腾讯Live开发者大会">
  <!-- Open Graph -->
  <meta name="description" content="Hexo 2.7 has been released with three new features. I’m going to introduce them below. Fragment CachingAlthough Hexo is fast, it may become slow if you have thousands of source files or complicated ca">
<meta name="keywords" content="TLC2020,大前端,Serverless,信息流,技术大会,前端,技术人,程序员,专家,IT,前端智能化,开发者大会,腾讯看点">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo 2.7 Released">
<meta property="og:url" content="https://2020.tlc.ivweb.io/news/2014/06/14/hexo-2-7-released/index.html">
<meta property="og:site_name" content="腾讯Live开发者大会">
<meta property="og:description" content="Hexo 2.7 has been released with three new features. I’m going to introduce them below. Fragment CachingAlthough Hexo is fast, it may become slow if you have thousands of source files or complicated ca">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-03-26T13:18:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo 2.7 Released">
<meta name="twitter:description" content="Hexo 2.7 has been released with three new features. I’m going to introduce them below. Fragment CachingAlthough Hexo is fast, it may become slow if you have thousands of source files or complicated ca">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <script src="https://cdn-go.cn/aegis/aegis-sdk/latest/aegis.min.js?bid=3977"></script>
  <script>
    const aegis = new Aegis({
      id: 2154, // 项目ID
      uin: '986874363' // 用户唯一 ID（可选）
    })
  </script>
</head>

<body>
  <div id="container">
    <header id="header" class="header">
  <div class="wrapper">
    <div id="header-inner" class="inner">
      <h1 id="logo-wrap">
        <a href="/zh-cn/" id="logo">Feflow</a>
      </h1>
      <nav id="main-nav">
        <a href="/speakers/" class="main-nav-link">讲师介绍</a><a href="/subjects/" class="main-nav-link">专题介绍</a><a href="/schedules/" class="main-nav-link">日程</a><a href="/apply/" class="main-nav-link">讲师申请</a>
        <!-- <a href="http://2019-en.tlc.ivweb.io" class="main-nav-link">English</a> -->
      </nav>
      <div id="buy-ticket">
        <span href="https://www.bagevent.com/event/6442240" class="buy-ticket-link" target="_blank"
              onclick="window.location.href=window.location.href.match(/(^|&|\?)discountCode=([^&]*)(&|$)/) && window.location.href.match(/(^|&|\?)discountCode=([^&]*)(&|$)/).length > 0 ? 'https:\/\/www.bagevent.com/event/6442240?discountCode=' + window.location.href.match(/(^|&|\?)discountCode=([^&]*)(&|$)/)[2] : 'https:\/\/www.bagevent.com/event/6442240'">立即购票</span>
      </div>
      <div id="lang-select-wrap">
        <label id="lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></label>
        <select id="lang-select" data-canonical="">

            <option value="zh-cn" selected>简体中文</option>

        </select>
      </div>
      <a id="mobile-nav-toggle">
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
      </a>
    </div>
  </div>
</header>

    <div id="content-wrap">
  <div class="wrapper">
    <div class="inner">
      <article class="article post" itemscope itemtype="http://schema.org/Article">
  <header class="article-header">
    
      <h1 class="article-title" itemprop="name">Hexo 2.7 Released</h1>
    
    <a href="/news/2014/06/14/hexo-2-7-released/" class="article-date"><time datetime="2014-06-14T00:00:00.000Z">2014-06-14</time></a>
  </header>
  <div class="article-content" itemprop="articleBody">
    <p>Hexo 2.7 has been released with three new features. I’m going to introduce them below.</p>
<h2 id="Fragment-Caching" class="article-heading"><a href="#Fragment-Caching" class="headerlink" title="Fragment Caching"></a>Fragment Caching<a class="article-anchor" href="#Fragment-Caching" aria-hidden="true"></a></h2><p>Although Hexo is fast, it may become slow if you have thousands of source files or complicated categories or tags. Before the data model upgraded, I borrowed a feature from Ruby on Rails: <strong>Fragment Caching</strong>.</p>
<p>Fragment Caching saves contents within a fragment and serves the cache when the next request come in. A fragment will only be processed once. It can reduce database queries and decrease generation time significantly. For instance, a Hexo site with 300+ source files needs 6 minutes to generate. In Hexo 2.7, it only need 10 seconds!</p>
<p>It can be used in header, footer, sidebar or static contents that won’t be changed during generating. For example:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;%- fragment_cache(<span class="string">'header'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;header&gt;&lt;/header&gt;'</span>;</span><br><span class="line">&#125;); %&gt;</span><br></pre></td></tr></table></figure>
<p>By using <code>fragment_cache</code> helper, contents in the function will be cached.</p>
<p>Partial helper also supports Fragment Caching, you only need to add a <code>{cache: true}</code> option when using partial.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;%- partial(<span class="string">'header'</span>, &#123;&#125;, &#123;<span class="attr">cache</span>: <span class="literal">true</span>&#125;) %&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" rel="noopener">Landscape</a> is updated and supports Fragment Caching now. You can check <a href="https://github.com/hexojs/hexo-theme-landscape/commit/d2aedda61571d6994eb72d784ceda2f59d2a8631" target="_blank" rel="noopener">this commit</a> to see what’s changed.</p>
<h2 id="Relative-Link" class="article-heading"><a href="#Relative-Link" class="headerlink" title="Relative Link"></a>Relative Link<a class="article-anchor" href="#Relative-Link" aria-hidden="true"></a></h2><p>Relative Link is supported since Hexo 2.7. But your theme needs some modifications to support it. However, it’s not as hard as you think. You just need to replace the following contents in templates</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;%- config.root %&gt;&lt;%- path %&gt;</span><br></pre></td></tr></table></figure>
<p>with <code>url_for</code> helper.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;%- url_for(path) %&gt;</span><br></pre></td></tr></table></figure>
<p><code>url_for</code> helper will add <code>config.root</code> automatically for you. If you enable <code>relative_link</code> setting, it’ll add a relative path.</p>
<p><a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" rel="noopener">Landscape</a> is updated for Relative Link. You can check <a href="https://github.com/hexojs/hexo-theme-landscape/commit/d29cbb83356373af27e7b98643f29a27804364af" target="_blank" rel="noopener">this commit</a> to see what’s changed.</p>
<h2 id="Server-Middleware" class="article-heading"><a href="#Server-Middleware" class="headerlink" title="Server Middleware"></a>Server Middleware<a class="article-anchor" href="#Server-Middleware" aria-hidden="true"></a></h2><p>Server Middleware would be familiar if you have ever used <a href="http://www.senchalabs.org/connect/" target="_blank" rel="noopener">Connect</a> or <a href="http://expressjs.com/" target="_blank" rel="noopener">Express</a> before. <a href="http://www.senchalabs.org/connect/" target="_blank" rel="noopener">Connect</a> passes a request through functions called <strong>middleware</strong>. You can make response to the coming in request in middleware.</p>
<p>In Hexo, middleware is served as a type of filter. You can add middleware by registering a new filter. For example:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo.extend.filter.register(<span class="string">'server_middleware'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">app</span>)</span>&#123;</span><br><span class="line">  app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    res.setHeader(<span class="string">'X-Powered-By'</span>, <span class="string">'Hexo'</span>);</span><br><span class="line">    next();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>This middleware add a header <code>X-Powered-By</code> and passes the request to the next middleware.</p>

  </div>
  
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'feflow';
  var disqus_url = 'https://2020.tlc.ivweb.io/news/2014/06/14/hexo-2-7-released/index.html';
  var disqus_title = "Hexo 2.7 Released";
  var disqus_config = function(){
    this.language = 'zh';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

</article>

    </div>
  </div>
</div>
    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-links">
      <div class="footer-subtitle">友情链接</div>
      <ul id="friendlink-items">

      </ul>
    </div>
    <div id="footer-contact">
      <div class="contact">
        <div class="footer-subtitle">联系方式</div>
        <div class="qq-group">
          <a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=695fc6be7d8c312c9e4c8c8fd242bada4bee33962d7c0af655467275c0fd8850"><img border="0" src="//pub.idqqimg.com/wpa/images/group.png" alt="IVWEB公众群②" title="IVWEB公众群②"></a>
        </div>
      </div>
      <div class="qr-code">
        <div class="footer-subtitle">公众号</div>
        <div>
          <img src="https://pub.idqqimg.com/pc/misc/files/20170911/48b1d9496df34e689d1191d8d5e9072b.png">
        </div>
      </div>
    </div>
    <div id="footer-transport">
      <div class="footer-subtitle">交通指南</div>
      <div class="location">
        <iframe src="//apis.map.qq.com/tools/poimarker?type=0&amp;zoom=10&amp;marker=coord:22.540430,113.934540;coordtype:5;title:科兴科学园国际会议中心;addr:深圳科兴科学园国际会议中心&amp;key=J5OBZ-NYL6G-MY2Q4-IWXUK-7YWDQ-SSB67&amp;referer=myapp" width="408" height="228" frameborder="0"></iframe>
      </div>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/speakers/" class="mobile-nav-link">讲师介绍</a><a href="/subjects/" class="mobile-nav-link">专题介绍</a><a href="/schedules/" class="mobile-nav-link">日程</a><a href="/apply/" class="mobile-nav-link">讲师申请</a>
    </ul>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="zh-cn" selected>简体中文</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="https://11.url.cn/now/lib/jquery/1.11.1/jquery.min.js"></script>
<script src="https://11.url.cn/now/lib/axios/0.18.0/axios.min.js"></script>
<script src="https://11.url.cn/now/lib/swig/1.4.2/swig.min.js"></script>
<script src="//res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script src="/js/unslider.min.js"></script>
<script src="/js/slider.js"></script>
<script src="/js/lang_select.js"></script>
<script src="/js/toc.js"></script>
<script src="/js/mobile_nav.js"></script>
<script src="/js/data.js"></script>
<script src="/js/carousel.js"></script>
<script src="/js/share.js"></script>
<script src="/js/mta.js"></script>
<!-- endbuild -->


</body>
</html>